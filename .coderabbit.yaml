# .coderabbit.yaml â€” Full-Stack SRE & Systemic Integrity Edition

reviews:
  auto_review:
    enabled: true
  profile: assertive
  request_changes_workflow: true

  instructions:
    - paths: ["**/*.{py,json,yaml,yml}"]
      instruction: |
        Act as a Staff Site Reliability Engineer (SRE). Your goal is to prevent deployment failures and eliminate "Configuration Drift."

        1. **The Infrastructure Sync**: If a Python file adds/removes an environment variable (os.getenv), you MUST verify that `vercel.json` and `.env.example` are updated accordingly.
        2. **Legacy Purge**: Flag any references to "Airtable" as Critical if the project intent (via Jira/PR description) indicates a move to HubSpot/GitHub.
        3. **Integration Reliability**: Ensure all API interactions (GitHub, HubSpot, Proxycurl) include:
           - Explicit timeouts.
           - Specific handling for 401 (Auth) and 403 (Rate Limit).
           - Custom exceptions (e.g., ConfigurationError) instead of generic Errors.
        4. **Jira Alignment**: If a Jira ticket is linked, validate that the implementation satisfies the ticket's Acceptance Criteria.

        **Output Format (Strict Table):**
        | Severity | Type | Location | Analysis | #FIX-REQUIRED |
        | :--- | :--- | :--- | :--- | :--- |
        | Critical | Config-Drift | `vercel.json` | AIRTABLE_BASE_ID is missing from secrets. | Yes |

