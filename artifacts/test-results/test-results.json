{"created": 1769907180.4212468, "duration": 1.0025644302368164, "exitcode": 1, "root": "/home/runner/work/The-lab-verse-monitoring-/The-lab-verse-monitoring-", "environment": {}, "summary": {"passed": 46, "failed": 3, "error": 3, "total": 52, "collected": 52}, "collectors": [{"nodeid": "", "outcome": "passed", "result": [{"nodeid": "tests", "type": "Dir"}]}, {"nodeid": "tests/test_analyzer.py::TestPRErrorAnalyzerReal", "outcome": "passed", "result": [{"nodeid": "tests/test_analyzer.py::TestPRErrorAnalyzerReal::test_analyze_error_basic", "type": "Function", "lineno": 31}, {"nodeid": "tests/test_analyzer.py::TestPRErrorAnalyzerReal::test_extract_root_cause", "type": "Function", "lineno": 41}]}, {"nodeid": "tests/test_analyzer.py", "outcome": "passed", "result": [{"nodeid": "tests/test_analyzer.py::TestPRErrorAnalyzerReal", "type": "Class"}]}, {"nodeid": "tests/test_fixer.py::TestPRErrorFixerReal", "outcome": "passed", "result": [{"nodeid": "tests/test_fixer.py::TestPRErrorFixerReal::test_fix_missing_file_creates_file", "type": "Function", "lineno": 40}, {"nodeid": "tests/test_fixer.py::TestPRErrorFixerReal::test_fix_blocks_path_traversal", "type": "Function", "lineno": 50}, {"nodeid": "tests/test_fixer.py::TestPRErrorFixerReal::test_fix_missing_dependency_adds_to_requirements", "type": "Function", "lineno": 58}]}, {"nodeid": "tests/test_fixer.py", "outcome": "passed", "result": [{"nodeid": "tests/test_fixer.py::TestPRErrorFixerReal", "type": "Class"}]}, {"nodeid": "tests/test_integration.py::TestHuggingFaceTokenUsage", "outcome": "passed", "result": [{"nodeid": "tests/test_integration.py::TestHuggingFaceTokenUsage::test_provider_uses_token_from_config", "type": "Function", "lineno": 53}, {"nodeid": "tests/test_integration.py::TestHuggingFaceTokenUsage::test_provider_warns_without_token", "type": "Function", "lineno": 74}, {"nodeid": "tests/test_integration.py::TestHuggingFaceTokenUsage::test_initialize_from_env_uses_hf_token", "type": "Function", "lineno": 92}, {"nodeid": "tests/test_integration.py::TestHuggingFaceTokenUsage::test_initialize_from_env_warns_without_token", "type": "Function", "lineno": 107}, {"nodeid": "tests/test_integration.py::TestHuggingFaceTokenUsage::test_model_loading_passes_token_to_transformers", "type": "Function", "lineno": 120}, {"nodeid": "tests/test_integration.py::TestHuggingFaceTokenUsage::test_authentication_error_gives_helpful_message", "type": "Function", "lineno": 156}, {"nodeid": "tests/test_integration.py::TestHuggingFaceTokenUsage::test_rate_limit_error_suggests_using_token", "type": "Function", "lineno": 187}]}, {"nodeid": "tests/test_integration.py::TestProviderInitialization", "outcome": "passed", "result": [{"nodeid": "tests/test_integration.py::TestProviderInitialization::test_factory_creates_openai_provider", "type": "Function", "lineno": 218}, {"nodeid": "tests/test_integration.py::TestProviderInitialization::test_factory_creates_huggingface_provider_with_token", "type": "Function", "lineno": 234}, {"nodeid": "tests/test_integration.py::TestProviderInitialization::test_initialize_from_env_openai", "type": "Function", "lineno": 251}]}, {"nodeid": "tests/test_integration.py::TestRedisSharedState", "outcome": "passed", "result": [{"nodeid": "tests/test_integration.py::TestRedisSharedState::test_rate_limiter_allows_under_limit", "type": "Coroutine", "lineno": 271}, {"nodeid": "tests/test_integration.py::TestRedisSharedState::test_rate_limiter_blocks_over_limit", "type": "Coroutine", "lineno": 282}, {"nodeid": "tests/test_integration.py::TestRedisSharedState::test_dedupe_cache_detects_duplicate", "type": "Coroutine", "lineno": 296}]}, {"nodeid": "tests/test_integration.py::TestSecurityIntegration", "outcome": "passed", "result": [{"nodeid": "tests/test_integration.py::TestSecurityIntegration::test_sanitized_prompt_prevents_injection", "type": "Coroutine", "lineno": 324}, {"nodeid": "tests/test_integration.py::TestSecurityIntegration::test_ssrf_blocker_prevents_private_ip_access", "type": "Coroutine", "lineno": 339}]}, {"nodeid": "tests/test_integration.py", "outcome": "passed", "result": [{"nodeid": "tests/test_integration.py::TestHuggingFaceTokenUsage", "type": "Class"}, {"nodeid": "tests/test_integration.py::TestProviderInitialization", "type": "Class"}, {"nodeid": "tests/test_integration.py::TestRedisSharedState", "type": "Class"}, {"nodeid": "tests/test_integration.py::TestSecurityIntegration", "type": "Class"}]}, {"nodeid": "tests/test_main.py::TestClient", "outcome": "passed", "result": []}, {"nodeid": "tests/test_main.py", "outcome": "passed", "result": [{"nodeid": "tests/test_main.py::TestClient", "type": "Class"}, {"nodeid": "tests/test_main.py::test_health_endpoint", "type": "Function", "lineno": 13}, {"nodeid": "tests/test_main.py::test_bitbucket_status_endpoint", "type": "Function", "lineno": 22}, {"nodeid": "tests/test_main.py::test_jira_status_endpoint", "type": "Function", "lineno": 30}, {"nodeid": "tests/test_main.py::test_bitbucket_webhook_success", "type": "Function", "lineno": 38}, {"nodeid": "tests/test_main.py::test_async_functionality", "type": "Coroutine", "lineno": 48}]}, {"nodeid": "tests/test_security.py::TestClient", "outcome": "passed", "result": []}, {"nodeid": "tests/test_security.py::TestPromptSanitization", "outcome": "passed", "result": [{"nodeid": "tests/test_security.py::TestPromptSanitization::test_clean_prompt_passes", "type": "Function", "lineno": 34}, {"nodeid": "tests/test_security.py::TestPromptSanitization::test_injection_pattern_detected", "type": "Function", "lineno": 40}, {"nodeid": "tests/test_security.py::TestPromptSanitization::test_strict_mode_raises_exception", "type": "Function", "lineno": 55}, {"nodeid": "tests/test_security.py::TestPromptSanitization::test_soft_mode_filters_patterns", "type": "Function", "lineno": 62}, {"nodeid": "tests/test_security.py::TestPromptSanitization::test_unicode_normalization", "type": "Function", "lineno": 70}, {"nodeid": "tests/test_security.py::TestPromptSanitization::test_length_truncation", "type": "Function", "lineno": 79}, {"nodeid": "tests/test_security.py::TestPromptSanitization::test_system_message_removal", "type": "Function", "lineno": 86}, {"nodeid": "tests/test_security.py::TestPromptSanitization::test_context_sanitization", "type": "Function", "lineno": 94}, {"nodeid": "tests/test_security.py::TestPromptSanitization::test_webhook_payload_sanitization", "type": "Function", "lineno": 110}]}, {"nodeid": "tests/test_security.py::TestSSRFProtection", "outcome": "passed", "result": [{"nodeid": "tests/test_security.py::TestSSRFProtection::test_private_ip_detection", "type": "Function", "lineno": 129}, {"nodeid": "tests/test_security.py::TestSSRFProtection::test_public_ip_allowed", "type": "Function", "lineno": 145}, {"nodeid": "tests/test_security.py::TestSSRFProtection::test_metadata_endpoint_blocked", "type": "Function", "lineno": 158}, {"nodeid": "tests/test_security.py::TestSSRFProtection::test_invalid_scheme_rejected", "type": "Function", "lineno": 165}, {"nodeid": "tests/test_security.py::TestSSRFProtection::test_domain_allowlist", "type": "Function", "lineno": 180}, {"nodeid": "tests/test_security.py::TestSSRFProtection::test_domain_blocklist", "type": "Function", "lineno": 193}, {"nodeid": "tests/test_security.py::TestSSRFProtection::test_dns_rebinding_protection", "type": "Function", "lineno": 201}, {"nodeid": "tests/test_security.py::TestSSRFProtection::test_safe_session_creation", "type": "Function", "lineno": 215}]}, {"nodeid": "tests/test_security.py::TestWebhookSecurity", "outcome": "passed", "result": [{"nodeid": "tests/test_security.py::TestWebhookSecurity::test_webhook_valid_signature", "type": "Function", "lineno": 231}, {"nodeid": "tests/test_security.py::TestWebhookSecurity::test_webhook_invalid_signature", "type": "Function", "lineno": 251}, {"nodeid": "tests/test_security.py::TestWebhookSecurity::test_webhook_missing_signature", "type": "Function", "lineno": 270}]}, {"nodeid": "tests/test_security.py::TestRateLimiting", "outcome": "passed", "result": [{"nodeid": "tests/test_security.py::TestRateLimiting::test_rate_limit_allows_under_threshold", "type": "Coroutine", "lineno": 288}, {"nodeid": "tests/test_security.py::TestRateLimiting::test_rate_limit_blocks_over_threshold", "type": "Coroutine", "lineno": 299}]}, {"nodeid": "tests/test_security.py::TestWebhookDeduplication", "outcome": "passed", "result": [{"nodeid": "tests/test_security.py::TestWebhookDeduplication::test_dedupe_detects_duplicate", "type": "Coroutine", "lineno": 317}]}, {"nodeid": "tests/test_security.py::TestAuthenticationSecurity", "outcome": "passed", "result": [{"nodeid": "tests/test_security.py::TestAuthenticationSecurity::test_missing_auth_key_rejected", "type": "Coroutine", "lineno": 342}, {"nodeid": "tests/test_security.py::TestAuthenticationSecurity::test_invalid_auth_key_rejected", "type": "Coroutine", "lineno": 355}, {"nodeid": "tests/test_security.py::TestAuthenticationSecurity::test_valid_auth_key_accepted", "type": "Coroutine", "lineno": 368}]}, {"nodeid": "tests/test_security.py::TestSecurityIntegration", "outcome": "passed", "result": [{"nodeid": "tests/test_security.py::TestSecurityIntegration::test_end_to_end_webhook_security", "type": "Coroutine", "lineno": 381}]}, {"nodeid": "tests/test_security.py", "outcome": "passed", "result": [{"nodeid": "tests/test_security.py::TestClient", "type": "Class"}, {"nodeid": "tests/test_security.py::TestPromptSanitization", "type": "Class"}, {"nodeid": "tests/test_security.py::TestSSRFProtection", "type": "Class"}, {"nodeid": "tests/test_security.py::TestWebhookSecurity", "type": "Class"}, {"nodeid": "tests/test_security.py::TestRateLimiting", "type": "Class"}, {"nodeid": "tests/test_security.py::TestWebhookDeduplication", "type": "Class"}, {"nodeid": "tests/test_security.py::TestAuthenticationSecurity", "type": "Class"}, {"nodeid": "tests/test_security.py::TestSecurityIntegration", "type": "Class"}]}, {"nodeid": "tests", "outcome": "passed", "result": [{"nodeid": "tests/test_analyzer.py", "type": "Module"}, {"nodeid": "tests/test_fixer.py", "type": "Module"}, {"nodeid": "tests/test_integration.py", "type": "Module"}, {"nodeid": "tests/test_main.py", "type": "Module"}, {"nodeid": "tests/test_security.py", "type": "Module"}]}], "tests": [{"nodeid": "tests/test_analyzer.py::TestPRErrorAnalyzerReal::test_analyze_error_basic", "lineno": 31, "outcome": "passed", "keywords": ["test_analyze_error_basic", "TestPRErrorAnalyzerReal", "test_analyzer.py", "tests", "The-lab-verse-monitoring-", ""], "setup": {"duration": 0.0007123499999579508, "outcome": "passed"}, "call": {"duration": 0.0001982200001293677, "outcome": "passed"}, "teardown": {"duration": 0.00015415699999721255, "outcome": "passed"}}, {"nodeid": "tests/test_analyzer.py::TestPRErrorAnalyzerReal::test_extract_root_cause", "lineno": 41, "outcome": "passed", "keywords": ["test_extract_root_cause", "TestPRErrorAnalyzerReal", "test_analyzer.py", "tests", "The-lab-verse-monitoring-", ""], "setup": {"duration": 0.0004389700002320751, "outcome": "passed"}, "call": {"duration": 0.00016864500003066496, "outcome": "passed"}, "teardown": {"duration": 0.0001353829998151923, "outcome": "passed"}}, {"nodeid": "tests/test_fixer.py::TestPRErrorFixerReal::test_fix_missing_file_creates_file", "lineno": 40, "outcome": "passed", "keywords": ["test_fix_missing_file_creates_file", "TestPRErrorFixerReal", "test_fixer.py", "tests", "The-lab-verse-monitoring-", ""], "setup": {"duration": 0.0017100719996960834, "outcome": "passed"}, "call": {"duration": 0.0008248900003309245, "outcome": "passed"}, "teardown": {"duration": 0.00015471899996555294, "outcome": "passed"}}, {"nodeid": "tests/test_fixer.py::TestPRErrorFixerReal::test_fix_blocks_path_traversal", "lineno": 50, "outcome": "passed", "keywords": ["test_fix_blocks_path_traversal", "TestPRErrorFixerReal", "test_fixer.py", "tests", "The-lab-verse-monitoring-", ""], "setup": {"duration": 0.0006831659998169926, "outcome": "passed"}, "call": {"duration": 0.0004088830000910093, "outcome": "passed", "stdout": "SECURITY: Blocked path ../../../etc/passwd: Path traversal detected: ../../../etc/passwd\n"}, "teardown": {"duration": 0.00015472899985979893, "outcome": "passed"}}, {"nodeid": "tests/test_fixer.py::TestPRErrorFixerReal::test_fix_missing_dependency_adds_to_requirements", "lineno": 58, "outcome": "passed", "keywords": ["test_fix_missing_dependency_adds_to_requirements", "TestPRErrorFixerReal", "test_fixer.py", "tests", "The-lab-verse-monitoring-", ""], "setup": {"duration": 0.0006967509998503374, "outcome": "passed"}, "call": {"duration": 0.0006996659999458643, "outcome": "passed"}, "teardown": {"duration": 0.00015325599997595418, "outcome": "passed"}}, {"nodeid": "tests/test_integration.py::TestHuggingFaceTokenUsage::test_provider_uses_token_from_config", "lineno": 53, "outcome": "passed", "keywords": ["test_provider_uses_token_from_config", "TestHuggingFaceTokenUsage", "test_integration.py", "tests", "The-lab-verse-monitoring-", ""], "setup": {"duration": 0.0002569899997979519, "outcome": "passed"}, "call": {"duration": 0.00015876599991315743, "outcome": "passed"}, "teardown": {"duration": 0.00013447999981508474, "outcome": "passed"}}, {"nodeid": "tests/test_integration.py::TestHuggingFaceTokenUsage::test_provider_warns_without_token", "lineno": 74, "outcome": "passed", "keywords": ["test_provider_warns_without_token", "TestHuggingFaceTokenUsage", "test_integration.py", "tests", "The-lab-verse-monitoring-", ""], "setup": {"duration": 0.00034643700018932577, "outcome": "passed"}, "call": {"duration": 0.00031050899997353554, "outcome": "passed", "log": [{"name": "agent.tools.llm_provider", "msg": "HuggingFace token (HF_TOKEN) not provided. This may cause issues with:\n  - Downloading models\n  - Accessing gated models\n  - Rate limits\nSet HF_TOKEN environment variable or pass api_key in config.", "args": null, "levelname": "WARNING", "levelno": 30, "pathname": "/home/runner/work/The-lab-verse-monitoring-/The-lab-verse-monitoring-/tests/../agent/tools/llm_provider.py", "filename": "llm_provider.py", "module": "llm_provider", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 130, "funcName": "__init__", "created": 1769907180.0765016, "msecs": 76.0, "relativeCreated": 761.2030506134033, "thread": 140668572371840, "threadName": "MainThread", "processName": "MainProcess", "process": 46287}]}, "teardown": {"duration": 0.00014159500005916925, "outcome": "passed"}}, {"nodeid": "tests/test_integration.py::TestHuggingFaceTokenUsage::test_initialize_from_env_uses_hf_token", "lineno": 92, "outcome": "passed", "keywords": ["test_initialize_from_env_uses_hf_token", "TestHuggingFaceTokenUsage", "test_integration.py", "tests", "The-lab-verse-monitoring-", ""], "setup": {"duration": 0.0002557669999987411, "outcome": "passed"}, "call": {"duration": 0.00021204599988777773, "outcome": "passed"}, "teardown": {"duration": 0.00014016199975230847, "outcome": "passed"}}, {"nodeid": "tests/test_integration.py::TestHuggingFaceTokenUsage::test_initialize_from_env_warns_without_token", "lineno": 107, "outcome": "passed", "keywords": ["test_initialize_from_env_warns_without_token", "TestHuggingFaceTokenUsage", "test_integration.py", "tests", "The-lab-verse-monitoring-", ""], "setup": {"duration": 0.00033462400006101234, "outcome": "passed"}, "call": {"duration": 0.0003109610001956753, "outcome": "passed", "log": [{"name": "agent.tools.llm_provider", "msg": "HF_TOKEN not set. HuggingFace provider will work but:\n  - Cannot download models that require authentication\n  - Lower rate limits apply\n  - Gated models will fail\nGet your token from: https://huggingface.co/settings/tokens", "args": null, "levelname": "WARNING", "levelno": 30, "pathname": "/home/runner/work/The-lab-verse-monitoring-/The-lab-verse-monitoring-/tests/../agent/tools/llm_provider.py", "filename": "llm_provider.py", "module": "llm_provider", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 524, "funcName": "initialize_from_env", "created": 1769907180.0787098, "msecs": 78.0, "relativeCreated": 763.411283493042, "thread": 140668572371840, "threadName": "MainThread", "processName": "MainProcess", "process": 46287}, {"name": "agent.tools.llm_provider", "msg": "HuggingFace token (HF_TOKEN) not provided. This may cause issues with:\n  - Downloading models\n  - Accessing gated models\n  - Rate limits\nSet HF_TOKEN environment variable or pass api_key in config.", "args": null, "levelname": "WARNING", "levelno": 30, "pathname": "/home/runner/work/The-lab-verse-monitoring-/The-lab-verse-monitoring-/tests/../agent/tools/llm_provider.py", "filename": "llm_provider.py", "module": "llm_provider", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 130, "funcName": "__init__", "created": 1769907180.078781, "msecs": 78.0, "relativeCreated": 763.4823322296143, "thread": 140668572371840, "threadName": "MainThread", "processName": "MainProcess", "process": 46287}]}, "teardown": {"duration": 0.0001368550001643598, "outcome": "passed"}}, {"nodeid": "tests/test_integration.py::TestHuggingFaceTokenUsage::test_model_loading_passes_token_to_transformers", "lineno": 120, "outcome": "failed", "keywords": ["test_model_loading_passes_token_to_transformers", "TestHuggingFaceTokenUsage", "test_integration.py", "tests", "The-lab-verse-monitoring-", ""], "setup": {"duration": 0.0002731200002017431, "outcome": "passed"}, "call": {"duration": 0.0005245189995548571, "outcome": "failed", "crash": {"path": "<frozen importlib._bootstrap>", "lineno": 1140, "message": "ModuleNotFoundError: No module named 'transformers'"}, "traceback": [{"path": "tests/test_integration.py", "lineno": 134, "message": "in test_model_loading_passes_token_to_transformers"}, {"path": "/opt/hostedtoolcache/Python/3.11.14/x64/lib/python3.11/unittest/mock.py", "lineno": 1430, "message": "in __enter__"}, {"path": "/opt/hostedtoolcache/Python/3.11.14/x64/lib/python3.11/pkgutil.py", "lineno": 700, "message": "in resolve_name"}, {"path": "/opt/hostedtoolcache/Python/3.11.14/x64/lib/python3.11/importlib/__init__.py", "lineno": 126, "message": "in import_module"}, {"path": "<frozen importlib._bootstrap>", "lineno": 1204, "message": "in _gcd_import"}, {"path": "<frozen importlib._bootstrap>", "lineno": 1176, "message": "in _find_and_load"}, {"path": "<frozen importlib._bootstrap>", "lineno": 1140, "message": "in _find_and_load_unlocked"}], "longrepr": "tests/test_integration.py:134: in test_model_loading_passes_token_to_transformers\n    with patch('transformers.AutoTokenizer', create=True) as mock_tokenizer_class:\n/opt/hostedtoolcache/Python/3.11.14/x64/lib/python3.11/unittest/mock.py:1430: in __enter__\n    self.target = self.getter()\n                  ^^^^^^^^^^^^^\n/opt/hostedtoolcache/Python/3.11.14/x64/lib/python3.11/pkgutil.py:700: in resolve_name\n    mod = importlib.import_module(modname)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n/opt/hostedtoolcache/Python/3.11.14/x64/lib/python3.11/importlib/__init__.py:126: in import_module\n    return _bootstrap._gcd_import(name[level:], package, level)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n<frozen importlib._bootstrap>:1204: in _gcd_import\n    ???\n<frozen importlib._bootstrap>:1176: in _find_and_load\n    ???\n<frozen importlib._bootstrap>:1140: in _find_and_load_unlocked\n    ???\nE   ModuleNotFoundError: No module named 'transformers'"}, "teardown": {"duration": 0.00019158799977958552, "outcome": "passed"}}, {"nodeid": "tests/test_integration.py::TestHuggingFaceTokenUsage::test_authentication_error_gives_helpful_message", "lineno": 156, "outcome": "failed", "keywords": ["test_authentication_error_gives_helpful_message", "TestHuggingFaceTokenUsage", "test_integration.py", "tests", "The-lab-verse-monitoring-", ""], "setup": {"duration": 0.00030076099983489257, "outcome": "passed"}, "call": {"duration": 0.0003549620000740106, "outcome": "failed", "crash": {"path": "<frozen importlib._bootstrap>", "lineno": 1140, "message": "ModuleNotFoundError: No module named 'transformers'"}, "traceback": [{"path": "tests/test_integration.py", "lineno": 170, "message": "in test_authentication_error_gives_helpful_message"}, {"path": "/opt/hostedtoolcache/Python/3.11.14/x64/lib/python3.11/unittest/mock.py", "lineno": 1430, "message": "in __enter__"}, {"path": "/opt/hostedtoolcache/Python/3.11.14/x64/lib/python3.11/pkgutil.py", "lineno": 700, "message": "in resolve_name"}, {"path": "/opt/hostedtoolcache/Python/3.11.14/x64/lib/python3.11/importlib/__init__.py", "lineno": 126, "message": "in import_module"}, {"path": "<frozen importlib._bootstrap>", "lineno": 1204, "message": "in _gcd_import"}, {"path": "<frozen importlib._bootstrap>", "lineno": 1176, "message": "in _find_and_load"}, {"path": "<frozen importlib._bootstrap>", "lineno": 1140, "message": "in _find_and_load_unlocked"}], "longrepr": "tests/test_integration.py:170: in test_authentication_error_gives_helpful_message\n    with patch('transformers.AutoTokenizer', create=True) as mock_tokenizer_class:\n/opt/hostedtoolcache/Python/3.11.14/x64/lib/python3.11/unittest/mock.py:1430: in __enter__\n    self.target = self.getter()\n                  ^^^^^^^^^^^^^\n/opt/hostedtoolcache/Python/3.11.14/x64/lib/python3.11/pkgutil.py:700: in resolve_name\n    mod = importlib.import_module(modname)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n/opt/hostedtoolcache/Python/3.11.14/x64/lib/python3.11/importlib/__init__.py:126: in import_module\n    return _bootstrap._gcd_import(name[level:], package, level)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n<frozen importlib._bootstrap>:1204: in _gcd_import\n    ???\n<frozen importlib._bootstrap>:1176: in _find_and_load\n    ???\n<frozen importlib._bootstrap>:1140: in _find_and_load_unlocked\n    ???\nE   ModuleNotFoundError: No module named 'transformers'"}, "teardown": {"duration": 0.00015211399977488327, "outcome": "passed"}}, {"nodeid": "tests/test_integration.py::TestHuggingFaceTokenUsage::test_rate_limit_error_suggests_using_token", "lineno": 187, "outcome": "failed", "keywords": ["test_rate_limit_error_suggests_using_token", "TestHuggingFaceTokenUsage", "test_integration.py", "tests", "The-lab-verse-monitoring-", ""], "setup": {"duration": 0.00023742299981677206, "outcome": "passed"}, "call": {"duration": 0.0004156360000706627, "outcome": "failed", "crash": {"path": "<frozen importlib._bootstrap>", "lineno": 1140, "message": "ModuleNotFoundError: No module named 'transformers'"}, "traceback": [{"path": "tests/test_integration.py", "lineno": 201, "message": "in test_rate_limit_error_suggests_using_token"}, {"path": "/opt/hostedtoolcache/Python/3.11.14/x64/lib/python3.11/unittest/mock.py", "lineno": 1430, "message": "in __enter__"}, {"path": "/opt/hostedtoolcache/Python/3.11.14/x64/lib/python3.11/pkgutil.py", "lineno": 700, "message": "in resolve_name"}, {"path": "/opt/hostedtoolcache/Python/3.11.14/x64/lib/python3.11/importlib/__init__.py", "lineno": 126, "message": "in import_module"}, {"path": "<frozen importlib._bootstrap>", "lineno": 1204, "message": "in _gcd_import"}, {"path": "<frozen importlib._bootstrap>", "lineno": 1176, "message": "in _find_and_load"}, {"path": "<frozen importlib._bootstrap>", "lineno": 1140, "message": "in _find_and_load_unlocked"}], "log": [{"name": "agent.tools.llm_provider", "msg": "HuggingFace token (HF_TOKEN) not provided. This may cause issues with:\n  - Downloading models\n  - Accessing gated models\n  - Rate limits\nSet HF_TOKEN environment variable or pass api_key in config.", "args": null, "levelname": "WARNING", "levelno": 30, "pathname": "/home/runner/work/The-lab-verse-monitoring-/The-lab-verse-monitoring-/tests/../agent/tools/llm_provider.py", "filename": "llm_provider.py", "module": "llm_provider", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 130, "funcName": "__init__", "created": 1769907180.2403476, "msecs": 240.0, "relativeCreated": 925.0490665435791, "thread": 140668572371840, "threadName": "MainThread", "processName": "MainProcess", "process": 46287}], "longrepr": "tests/test_integration.py:201: in test_rate_limit_error_suggests_using_token\n    with patch('transformers.AutoTokenizer', create=True) as mock_tokenizer_class:\n/opt/hostedtoolcache/Python/3.11.14/x64/lib/python3.11/unittest/mock.py:1430: in __enter__\n    self.target = self.getter()\n                  ^^^^^^^^^^^^^\n/opt/hostedtoolcache/Python/3.11.14/x64/lib/python3.11/pkgutil.py:700: in resolve_name\n    mod = importlib.import_module(modname)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n/opt/hostedtoolcache/Python/3.11.14/x64/lib/python3.11/importlib/__init__.py:126: in import_module\n    return _bootstrap._gcd_import(name[level:], package, level)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n<frozen importlib._bootstrap>:1204: in _gcd_import\n    ???\n<frozen importlib._bootstrap>:1176: in _find_and_load\n    ???\n<frozen importlib._bootstrap>:1140: in _find_and_load_unlocked\n    ???\nE   ModuleNotFoundError: No module named 'transformers'"}, "teardown": {"duration": 0.00015620199974364368, "outcome": "passed"}}, {"nodeid": "tests/test_integration.py::TestProviderInitialization::test_factory_creates_openai_provider", "lineno": 218, "outcome": "passed", "keywords": ["test_factory_creates_openai_provider", "TestProviderInitialization", "test_integration.py", "tests", "The-lab-verse-monitoring-", ""], "setup": {"duration": 0.000269101999947452, "outcome": "passed"}, "call": {"duration": 0.00014551200001733378, "outcome": "passed"}, "teardown": {"duration": 0.00013473199987856788, "outcome": "passed"}}, {"nodeid": "tests/test_integration.py::TestProviderInitialization::test_factory_creates_huggingface_provider_with_token", "lineno": 234, "outcome": "passed", "keywords": ["test_factory_creates_huggingface_provider_with_token", "TestProviderInitialization", "test_integration.py", "tests", "The-lab-verse-monitoring-", ""], "setup": {"duration": 0.00021917999993092963, "outcome": "passed"}, "call": {"duration": 0.00014264599985835957, "outcome": "passed"}, "teardown": {"duration": 0.00015281500009223237, "outcome": "passed"}}, {"nodeid": "tests/test_integration.py::TestProviderInitialization::test_initialize_from_env_openai", "lineno": 251, "outcome": "passed", "keywords": ["test_initialize_from_env_openai", "TestProviderInitialization", "test_integration.py", "tests", "The-lab-verse-monitoring-", ""], "setup": {"duration": 0.0002162629998565535, "outcome": "passed"}, "call": {"duration": 0.0001524640001662192, "outcome": "passed"}, "teardown": {"duration": 0.000151914000070974, "outcome": "passed"}}, {"nodeid": "tests/test_integration.py::TestRedisSharedState::test_rate_limiter_allows_under_limit", "lineno": 271, "outcome": "error", "keywords": ["test_rate_limiter_allows_under_limit", "asyncio", "pytestmark", "TestRedisSharedState", "test_integration.py", "tests", "The-lab-verse-monitoring-", ""], "setup": {"duration": 0.00021608299994113622, "outcome": "failed", "crash": {"path": "/opt/hostedtoolcache/Python/3.11.14/x64/lib/python3.11/site-packages/_pytest/fixtures.py", "lineno": 1188, "message": "pytest.PytestRemovedIn9Warning: 'test_rate_limiter_allows_under_limit' requested an async fixture 'redis_client', with no plugin or hook that handled it. This is usually an error, as pytest does not natively support it. This will turn into an error in pytest 9.\nSee: https://docs.pytest.org/en/stable/deprecations.html#sync-test-depending-on-async-fixture"}, "traceback": [{"path": "/opt/hostedtoolcache/Python/3.11.14/x64/lib/python3.11/site-packages/pytest_asyncio/plugin.py", "lineno": 458, "message": "in setup"}, {"path": "/opt/hostedtoolcache/Python/3.11.14/x64/lib/python3.11/site-packages/pytest_asyncio/plugin.py", "lineno": 728, "message": "in pytest_fixture_setup"}], "longrepr": "/opt/hostedtoolcache/Python/3.11.14/x64/lib/python3.11/site-packages/pytest_asyncio/plugin.py:458: in setup\n    return super().setup()\n           ^^^^^^^^^^^^^^^\n/opt/hostedtoolcache/Python/3.11.14/x64/lib/python3.11/site-packages/pytest_asyncio/plugin.py:728: in pytest_fixture_setup\n    return (yield)\n            ^^^^^\nE   pytest.PytestRemovedIn9Warning: 'test_rate_limiter_allows_under_limit' requested an async fixture 'redis_client', with no plugin or hook that handled it. This is usually an error, as pytest does not natively support it. This will turn into an error in pytest 9.\nE   See: https://docs.pytest.org/en/stable/deprecations.html#sync-test-depending-on-async-fixture"}, "teardown": {"duration": 0.00015161300007093814, "outcome": "passed"}}, {"nodeid": "tests/test_integration.py::TestRedisSharedState::test_rate_limiter_blocks_over_limit", "lineno": 282, "outcome": "error", "keywords": ["test_rate_limiter_blocks_over_limit", "asyncio", "pytestmark", "TestRedisSharedState", "test_integration.py", "tests", "The-lab-verse-monitoring-", ""], "setup": {"duration": 0.00022027099976185127, "outcome": "failed", "crash": {"path": "/opt/hostedtoolcache/Python/3.11.14/x64/lib/python3.11/site-packages/_pytest/fixtures.py", "lineno": 1188, "message": "pytest.PytestRemovedIn9Warning: 'test_rate_limiter_blocks_over_limit' requested an async fixture 'redis_client', with no plugin or hook that handled it. This is usually an error, as pytest does not natively support it. This will turn into an error in pytest 9.\nSee: https://docs.pytest.org/en/stable/deprecations.html#sync-test-depending-on-async-fixture"}, "traceback": [{"path": "/opt/hostedtoolcache/Python/3.11.14/x64/lib/python3.11/site-packages/pytest_asyncio/plugin.py", "lineno": 458, "message": "in setup"}, {"path": "/opt/hostedtoolcache/Python/3.11.14/x64/lib/python3.11/site-packages/pytest_asyncio/plugin.py", "lineno": 728, "message": "in pytest_fixture_setup"}], "longrepr": "/opt/hostedtoolcache/Python/3.11.14/x64/lib/python3.11/site-packages/pytest_asyncio/plugin.py:458: in setup\n    return super().setup()\n           ^^^^^^^^^^^^^^^\n/opt/hostedtoolcache/Python/3.11.14/x64/lib/python3.11/site-packages/pytest_asyncio/plugin.py:728: in pytest_fixture_setup\n    return (yield)\n            ^^^^^\nE   pytest.PytestRemovedIn9Warning: 'test_rate_limiter_blocks_over_limit' requested an async fixture 'redis_client', with no plugin or hook that handled it. This is usually an error, as pytest does not natively support it. This will turn into an error in pytest 9.\nE   See: https://docs.pytest.org/en/stable/deprecations.html#sync-test-depending-on-async-fixture"}, "teardown": {"duration": 0.00013021299992033164, "outcome": "passed"}}, {"nodeid": "tests/test_integration.py::TestRedisSharedState::test_dedupe_cache_detects_duplicate", "lineno": 296, "outcome": "error", "keywords": ["test_dedupe_cache_detects_duplicate", "asyncio", "pytestmark", "TestRedisSharedState", "test_integration.py", "tests", "The-lab-verse-monitoring-", ""], "setup": {"duration": 0.00020765699991898146, "outcome": "failed", "crash": {"path": "/opt/hostedtoolcache/Python/3.11.14/x64/lib/python3.11/site-packages/_pytest/fixtures.py", "lineno": 1188, "message": "pytest.PytestRemovedIn9Warning: 'test_dedupe_cache_detects_duplicate' requested an async fixture 'redis_client', with no plugin or hook that handled it. This is usually an error, as pytest does not natively support it. This will turn into an error in pytest 9.\nSee: https://docs.pytest.org/en/stable/deprecations.html#sync-test-depending-on-async-fixture"}, "traceback": [{"path": "/opt/hostedtoolcache/Python/3.11.14/x64/lib/python3.11/site-packages/pytest_asyncio/plugin.py", "lineno": 458, "message": "in setup"}, {"path": "/opt/hostedtoolcache/Python/3.11.14/x64/lib/python3.11/site-packages/pytest_asyncio/plugin.py", "lineno": 728, "message": "in pytest_fixture_setup"}], "longrepr": "/opt/hostedtoolcache/Python/3.11.14/x64/lib/python3.11/site-packages/pytest_asyncio/plugin.py:458: in setup\n    return super().setup()\n           ^^^^^^^^^^^^^^^\n/opt/hostedtoolcache/Python/3.11.14/x64/lib/python3.11/site-packages/pytest_asyncio/plugin.py:728: in pytest_fixture_setup\n    return (yield)\n            ^^^^^\nE   pytest.PytestRemovedIn9Warning: 'test_dedupe_cache_detects_duplicate' requested an async fixture 'redis_client', with no plugin or hook that handled it. This is usually an error, as pytest does not natively support it. This will turn into an error in pytest 9.\nE   See: https://docs.pytest.org/en/stable/deprecations.html#sync-test-depending-on-async-fixture"}, "teardown": {"duration": 0.00018738000017037848, "outcome": "passed"}}, {"nodeid": "tests/test_integration.py::TestSecurityIntegration::test_sanitized_prompt_prevents_injection", "lineno": 324, "outcome": "passed", "keywords": ["test_sanitized_prompt_prevents_injection", "asyncio", "pytestmark", "TestSecurityIntegration", "test_integration.py", "tests", "The-lab-verse-monitoring-", ""], "setup": {"duration": 0.0004967469999428431, "outcome": "passed"}, "call": {"duration": 0.0010079220000989153, "outcome": "passed", "log": [{"name": "vaal_ai_empire.api.sanitizers", "msg": "Dangerous patterns detected: ['(?i)(ignore|forget|disregard)\\\\s+(?:.*?\\\\s+)?(instructions|prompts|rules|everything|above)']", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/The-lab-verse-monitoring-/The-lab-verse-monitoring-/tests/../vaal_ai_empire/api/sanitizers.py", "filename": "sanitizers.py", "module": "sanitizers", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 73, "funcName": "sanitize_prompt", "created": 1769907180.352264, "msecs": 352.0, "relativeCreated": 1036.9653701782227, "thread": 140668572371840, "threadName": "MainThread", "processName": "MainProcess", "process": 46287}]}, "teardown": {"duration": 0.0003587699998206517, "outcome": "passed"}}, {"nodeid": "tests/test_integration.py::TestSecurityIntegration::test_ssrf_blocker_prevents_private_ip_access", "lineno": 339, "outcome": "passed", "keywords": ["test_ssrf_blocker_prevents_private_ip_access", "asyncio", "pytestmark", "TestSecurityIntegration", "test_integration.py", "tests", "The-lab-verse-monitoring-", ""], "setup": {"duration": 0.00033259099973292905, "outcome": "passed"}, "call": {"duration": 0.00033812199990279623, "outcome": "passed"}, "teardown": {"duration": 0.0002460289997543441, "outcome": "passed"}}, {"nodeid": "tests/test_main.py::test_health_endpoint", "lineno": 13, "outcome": "passed", "keywords": ["test_health_endpoint", "test_main.py", "tests", "The-lab-verse-monitoring-", ""], "setup": {"duration": 0.00017077900020012748, "outcome": "passed"}, "call": {"duration": 0.00267784900006518, "outcome": "passed"}, "teardown": {"duration": 0.0001134520002779027, "outcome": "passed"}}, {"nodeid": "tests/test_main.py::test_bitbucket_status_endpoint", "lineno": 22, "outcome": "passed", "keywords": ["test_bitbucket_status_endpoint", "test_main.py", "tests", "The-lab-verse-monitoring-", ""], "setup": {"duration": 0.00013599400017483276, "outcome": "passed"}, "call": {"duration": 0.002032924999639363, "outcome": "passed"}, "teardown": {"duration": 0.00010790099986479618, "outcome": "passed"}}, {"nodeid": "tests/test_main.py::test_jira_status_endpoint", "lineno": 30, "outcome": "passed", "keywords": ["test_jira_status_endpoint", "test_main.py", "tests", "The-lab-verse-monitoring-", ""], "setup": {"duration": 0.0001384279999001592, "outcome": "passed"}, "call": {"duration": 0.0018146269999306242, "outcome": "passed"}, "teardown": {"duration": 0.0001067690000127186, "outcome": "passed"}}, {"nodeid": "tests/test_main.py::test_bitbucket_webhook_success", "lineno": 38, "outcome": "passed", "keywords": ["test_bitbucket_webhook_success", "test_main.py", "tests", "The-lab-verse-monitoring-", ""], "setup": {"duration": 0.00013332899970919243, "outcome": "passed"}, "call": {"duration": 0.0024343939999198483, "outcome": "passed"}, "teardown": {"duration": 0.00010610700019242358, "outcome": "passed"}}, {"nodeid": "tests/test_main.py::test_async_functionality", "lineno": 48, "outcome": "passed", "keywords": ["test_async_functionality", "asyncio", "pytestmark", "test_main.py", "tests", "The-lab-verse-monitoring-", ""], "setup": {"duration": 0.00034253900003022864, "outcome": "passed"}, "call": {"duration": 0.00021248699977149954, "outcome": "passed"}, "teardown": {"duration": 0.00023597000017616665, "outcome": "passed"}}, {"nodeid": "tests/test_security.py::TestPromptSanitization::test_clean_prompt_passes", "lineno": 34, "outcome": "passed", "keywords": ["test_clean_prompt_passes", "TestPromptSanitization", "test_security.py", "tests", "The-lab-verse-monitoring-", ""], "setup": {"duration": 0.00013519300000552903, "outcome": "passed"}, "call": {"duration": 0.0001444499998797255, "outcome": "passed"}, "teardown": {"duration": 0.00010123899983227602, "outcome": "passed"}}, {"nodeid": "tests/test_security.py::TestPromptSanitization::test_injection_pattern_detected", "lineno": 40, "outcome": "passed", "keywords": ["test_injection_pattern_detected", "TestPromptSanitization", "test_security.py", "tests", "The-lab-verse-monitoring-", ""], "setup": {"duration": 0.00012772799982485594, "outcome": "passed"}, "call": {"duration": 0.00018215000000054715, "outcome": "passed"}, "teardown": {"duration": 0.00010161000000152853, "outcome": "passed"}}, {"nodeid": "tests/test_security.py::TestPromptSanitization::test_strict_mode_raises_exception", "lineno": 55, "outcome": "passed", "keywords": ["test_strict_mode_raises_exception", "TestPromptSanitization", "test_security.py", "tests", "The-lab-verse-monitoring-", ""], "setup": {"duration": 0.0001267970001208596, "outcome": "passed"}, "call": {"duration": 0.00021677499989891658, "outcome": "passed", "log": [{"name": "vaal_ai_empire.api.sanitizers", "msg": "Dangerous patterns detected: ['(?i)(ignore|forget|disregard)\\\\s+(?:.*?\\\\s+)?(instructions|prompts|rules|everything|above)']", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/The-lab-verse-monitoring-/The-lab-verse-monitoring-/tests/../vaal_ai_empire/api/sanitizers.py", "filename": "sanitizers.py", "module": "sanitizers", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 73, "funcName": "sanitize_prompt", "created": 1769907180.369272, "msecs": 369.0, "relativeCreated": 1053.9734363555908, "thread": 140668572371840, "threadName": "MainThread", "processName": "MainProcess", "process": 46287}]}, "teardown": {"duration": 0.00011845100016216747, "outcome": "passed"}}, {"nodeid": "tests/test_security.py::TestPromptSanitization::test_soft_mode_filters_patterns", "lineno": 62, "outcome": "passed", "keywords": ["test_soft_mode_filters_patterns", "TestPromptSanitization", "test_security.py", "tests", "The-lab-verse-monitoring-", ""], "setup": {"duration": 0.00012637600002562976, "outcome": "passed"}, "call": {"duration": 0.00021088400035296218, "outcome": "passed", "log": [{"name": "vaal_ai_empire.api.sanitizers", "msg": "Dangerous patterns detected: ['(?i)(ignore|forget|disregard)\\\\s+(?:.*?\\\\s+)?(instructions|prompts|rules|everything|above)']", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/The-lab-verse-monitoring-/The-lab-verse-monitoring-/tests/../vaal_ai_empire/api/sanitizers.py", "filename": "sanitizers.py", "module": "sanitizers", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 73, "funcName": "sanitize_prompt", "created": 1769907180.3701005, "msecs": 370.0, "relativeCreated": 1054.8019409179688, "thread": 140668572371840, "threadName": "MainThread", "processName": "MainProcess", "process": 46287}]}, "teardown": {"duration": 0.00010091799958900083, "outcome": "passed"}}, {"nodeid": "tests/test_security.py::TestPromptSanitization::test_unicode_normalization", "lineno": 70, "outcome": "passed", "keywords": ["test_unicode_normalization", "TestPromptSanitization", "test_security.py", "tests", "The-lab-verse-monitoring-", ""], "setup": {"duration": 0.0001307239999732701, "outcome": "passed"}, "call": {"duration": 0.0001273079997190507, "outcome": "passed"}, "teardown": {"duration": 9.836300023380318e-05, "outcome": "passed"}}, {"nodeid": "tests/test_security.py::TestPromptSanitization::test_length_truncation", "lineno": 79, "outcome": "passed", "keywords": ["test_length_truncation", "TestPromptSanitization", "test_security.py", "tests", "The-lab-verse-monitoring-", ""], "setup": {"duration": 0.0001270369998565002, "outcome": "passed"}, "call": {"duration": 0.0002069470001515583, "outcome": "passed", "log": [{"name": "vaal_ai_empire.api.sanitizers", "msg": "Prompt truncated from 10000 to 100 chars", "args": null, "levelname": "WARNING", "levelno": 30, "pathname": "/home/runner/work/The-lab-verse-monitoring-/The-lab-verse-monitoring-/tests/../vaal_ai_empire/api/sanitizers.py", "filename": "sanitizers.py", "module": "sanitizers", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 62, "funcName": "sanitize_prompt", "created": 1769907180.3716917, "msecs": 371.0, "relativeCreated": 1056.3931465148926, "thread": 140668572371840, "threadName": "MainThread", "processName": "MainProcess", "process": 46287}]}, "teardown": {"duration": 9.953500011761207e-05, "outcome": "passed"}}, {"nodeid": "tests/test_security.py::TestPromptSanitization::test_system_message_removal", "lineno": 86, "outcome": "passed", "keywords": ["test_system_message_removal", "TestPromptSanitization", "test_security.py", "tests", "The-lab-verse-monitoring-", ""], "setup": {"duration": 0.00012656699982471764, "outcome": "passed"}, "call": {"duration": 0.00012865000007877825, "outcome": "passed"}, "teardown": {"duration": 0.00010035700006483239, "outcome": "passed"}}, {"nodeid": "tests/test_security.py::TestPromptSanitization::test_context_sanitization", "lineno": 94, "outcome": "passed", "keywords": ["test_context_sanitization", "TestPromptSanitization", "test_security.py", "tests", "The-lab-verse-monitoring-", ""], "setup": {"duration": 0.00012483399996199296, "outcome": "passed"}, "call": {"duration": 0.0002091209998980048, "outcome": "passed", "log": [{"name": "vaal_ai_empire.api.sanitizers", "msg": "Dangerous patterns detected: ['(?i)(ignore|forget|disregard)\\\\s+(?:.*?\\\\s+)?(instructions|prompts|rules|everything|above)']", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/The-lab-verse-monitoring-/The-lab-verse-monitoring-/tests/../vaal_ai_empire/api/sanitizers.py", "filename": "sanitizers.py", "module": "sanitizers", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 73, "funcName": "sanitize_prompt", "created": 1769907180.373235, "msecs": 373.0, "relativeCreated": 1057.936429977417, "thread": 140668572371840, "threadName": "MainThread", "processName": "MainProcess", "process": 46287}]}, "teardown": {"duration": 0.0001148450000982848, "outcome": "passed"}}, {"nodeid": "tests/test_security.py::TestPromptSanitization::test_webhook_payload_sanitization", "lineno": 110, "outcome": "passed", "keywords": ["test_webhook_payload_sanitization", "TestPromptSanitization", "test_security.py", "tests", "The-lab-verse-monitoring-", ""], "setup": {"duration": 0.00012683699969784357, "outcome": "passed"}, "call": {"duration": 0.0004772610000145505, "outcome": "passed", "log": [{"name": "vaal_ai_empire.api.sanitizers", "msg": "Dangerous patterns detected: ['(?i)(ignore|forget|disregard)\\\\s+(?:.*?\\\\s+)?(instructions|prompts|rules|everything|above)']", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/The-lab-verse-monitoring-/The-lab-verse-monitoring-/tests/../vaal_ai_empire/api/sanitizers.py", "filename": "sanitizers.py", "module": "sanitizers", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 73, "funcName": "sanitize_prompt", "created": 1769907180.3742392, "msecs": 374.0, "relativeCreated": 1058.9406490325928, "thread": 140668572371840, "threadName": "MainThread", "processName": "MainProcess", "process": 46287}]}, "teardown": {"duration": 0.00010576799968475825, "outcome": "passed"}}, {"nodeid": "tests/test_security.py::TestSSRFProtection::test_private_ip_detection", "lineno": 129, "outcome": "passed", "keywords": ["test_private_ip_detection", "TestSSRFProtection", "test_security.py", "tests", "The-lab-verse-monitoring-", ""], "setup": {"duration": 0.00012775899995176587, "outcome": "passed"}, "call": {"duration": 0.00018419400021230103, "outcome": "passed"}, "teardown": {"duration": 9.972599991669995e-05, "outcome": "passed"}}, {"nodeid": "tests/test_security.py::TestSSRFProtection::test_public_ip_allowed", "lineno": 145, "outcome": "passed", "keywords": ["test_public_ip_allowed", "TestSSRFProtection", "test_security.py", "tests", "The-lab-verse-monitoring-", ""], "setup": {"duration": 0.00013117499975123792, "outcome": "passed"}, "call": {"duration": 0.00014675400007035933, "outcome": "passed"}, "teardown": {"duration": 9.673099975771038e-05, "outcome": "passed"}}, {"nodeid": "tests/test_security.py::TestSSRFProtection::test_metadata_endpoint_blocked", "lineno": 158, "outcome": "passed", "keywords": ["test_metadata_endpoint_blocked", "TestSSRFProtection", "test_security.py", "tests", "The-lab-verse-monitoring-", ""], "setup": {"duration": 0.00012399100023685605, "outcome": "passed"}, "call": {"duration": 0.00012412100022629602, "outcome": "passed"}, "teardown": {"duration": 9.527800011710497e-05, "outcome": "passed"}}, {"nodeid": "tests/test_security.py::TestSSRFProtection::test_invalid_scheme_rejected", "lineno": 165, "outcome": "passed", "keywords": ["test_invalid_scheme_rejected", "TestSSRFProtection", "test_security.py", "tests", "The-lab-verse-monitoring-", ""], "setup": {"duration": 0.00012388100003590807, "outcome": "passed"}, "call": {"duration": 0.0001525150000816211, "outcome": "passed"}, "teardown": {"duration": 0.00010086899965244811, "outcome": "passed"}}, {"nodeid": "tests/test_security.py::TestSSRFProtection::test_domain_allowlist", "lineno": 180, "outcome": "passed", "keywords": ["test_domain_allowlist", "TestSSRFProtection", "test_security.py", "tests", "The-lab-verse-monitoring-", ""], "setup": {"duration": 0.00012511300019468763, "outcome": "passed"}, "call": {"duration": 0.0008200410002245917, "outcome": "passed"}, "teardown": {"duration": 0.0001046150000547641, "outcome": "passed"}}, {"nodeid": "tests/test_security.py::TestSSRFProtection::test_domain_blocklist", "lineno": 193, "outcome": "passed", "keywords": ["test_domain_blocklist", "TestSSRFProtection", "test_security.py", "tests", "The-lab-verse-monitoring-", ""], "setup": {"duration": 0.00013250800020614406, "outcome": "passed"}, "call": {"duration": 0.00015118200008146232, "outcome": "passed"}, "teardown": {"duration": 9.971600002245395e-05, "outcome": "passed"}}, {"nodeid": "tests/test_security.py::TestSSRFProtection::test_dns_rebinding_protection", "lineno": 201, "outcome": "passed", "keywords": ["test_dns_rebinding_protection", "__wrapped__", "patchings", "TestSSRFProtection", "test_security.py", "tests", "The-lab-verse-monitoring-", ""], "setup": {"duration": 0.00012782800013155793, "outcome": "passed"}, "call": {"duration": 0.0005369530003918044, "outcome": "passed"}, "teardown": {"duration": 0.00010234100000161561, "outcome": "passed"}}, {"nodeid": "tests/test_security.py::TestSSRFProtection::test_safe_session_creation", "lineno": 215, "outcome": "passed", "keywords": ["test_safe_session_creation", "TestSSRFProtection", "test_security.py", "tests", "The-lab-verse-monitoring-", ""], "setup": {"duration": 0.00013132499998391722, "outcome": "passed"}, "call": {"duration": 0.020877101000223774, "outcome": "passed"}, "teardown": {"duration": 0.0001311939995503053, "outcome": "passed"}}, {"nodeid": "tests/test_security.py::TestWebhookSecurity::test_webhook_valid_signature", "lineno": 231, "outcome": "passed", "keywords": ["test_webhook_valid_signature", "TestWebhookSecurity", "test_security.py", "tests", "The-lab-verse-monitoring-", ""], "setup": {"duration": 0.00013501200010068715, "outcome": "passed"}, "call": {"duration": 0.0017373339996993309, "outcome": "passed"}, "teardown": {"duration": 0.00010567700019237236, "outcome": "passed"}}, {"nodeid": "tests/test_security.py::TestWebhookSecurity::test_webhook_invalid_signature", "lineno": 251, "outcome": "passed", "keywords": ["test_webhook_invalid_signature", "TestWebhookSecurity", "test_security.py", "tests", "The-lab-verse-monitoring-", ""], "setup": {"duration": 0.0001328979997197166, "outcome": "passed"}, "call": {"duration": 0.0014752039996892563, "outcome": "passed"}, "teardown": {"duration": 0.00010494700018170988, "outcome": "passed"}}, {"nodeid": "tests/test_security.py::TestWebhookSecurity::test_webhook_missing_signature", "lineno": 270, "outcome": "passed", "keywords": ["test_webhook_missing_signature", "TestWebhookSecurity", "test_security.py", "tests", "The-lab-verse-monitoring-", ""], "setup": {"duration": 0.0001328379998994933, "outcome": "passed"}, "call": {"duration": 0.001429619000191451, "outcome": "passed"}, "teardown": {"duration": 0.00010611800007609418, "outcome": "passed"}}, {"nodeid": "tests/test_security.py::TestRateLimiting::test_rate_limit_allows_under_threshold", "lineno": 288, "outcome": "passed", "keywords": ["test_rate_limit_allows_under_threshold", "asyncio", "pytestmark", "TestRateLimiting", "test_security.py", "tests", "The-lab-verse-monitoring-", ""], "setup": {"duration": 0.00036110400014877087, "outcome": "passed"}, "call": {"duration": 0.0002235669999208767, "outcome": "passed"}, "teardown": {"duration": 0.00022965900006965967, "outcome": "passed"}}, {"nodeid": "tests/test_security.py::TestRateLimiting::test_rate_limit_blocks_over_threshold", "lineno": 299, "outcome": "passed", "keywords": ["test_rate_limit_blocks_over_threshold", "asyncio", "pytestmark", "TestRateLimiting", "test_security.py", "tests", "The-lab-verse-monitoring-", ""], "setup": {"duration": 0.0003200180003659625, "outcome": "passed"}, "call": {"duration": 0.000207807999686338, "outcome": "passed"}, "teardown": {"duration": 0.000242863000039506, "outcome": "passed"}}, {"nodeid": "tests/test_security.py::TestWebhookDeduplication::test_dedupe_detects_duplicate", "lineno": 317, "outcome": "passed", "keywords": ["test_dedupe_detects_duplicate", "asyncio", "pytestmark", "TestWebhookDeduplication", "test_security.py", "tests", "The-lab-verse-monitoring-", ""], "setup": {"duration": 0.0003098380002484191, "outcome": "passed"}, "call": {"duration": 0.000222645999656379, "outcome": "passed"}, "teardown": {"duration": 0.00022828600003776955, "outcome": "passed"}}, {"nodeid": "tests/test_security.py::TestAuthenticationSecurity::test_missing_auth_key_rejected", "lineno": 342, "outcome": "passed", "keywords": ["test_missing_auth_key_rejected", "asyncio", "pytestmark", "TestAuthenticationSecurity", "test_security.py", "tests", "The-lab-verse-monitoring-", ""], "setup": {"duration": 0.000310058999730245, "outcome": "passed"}, "call": {"duration": 0.0008557680002923007, "outcome": "passed", "log": [{"name": "app.main", "msg": "Invalid or missing self-healing key", "args": null, "levelname": "WARNING", "levelno": 30, "pathname": "/home/runner/work/The-lab-verse-monitoring-/The-lab-verse-monitoring-/tests/../app/main.py", "filename": "main.py", "module": "main", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 181, "funcName": "verify_self_healing_key", "created": 1769907180.4137096, "msecs": 413.0, "relativeCreated": 1098.4110832214355, "thread": 140668572371840, "threadName": "MainThread", "processName": "MainProcess", "process": 46287}]}, "teardown": {"duration": 0.0002465799998390139, "outcome": "passed"}}, {"nodeid": "tests/test_security.py::TestAuthenticationSecurity::test_invalid_auth_key_rejected", "lineno": 355, "outcome": "passed", "keywords": ["test_invalid_auth_key_rejected", "asyncio", "pytestmark", "TestAuthenticationSecurity", "test_security.py", "tests", "The-lab-verse-monitoring-", ""], "setup": {"duration": 0.0003264899996793247, "outcome": "passed"}, "call": {"duration": 0.0008649150004202966, "outcome": "passed", "log": [{"name": "app.main", "msg": "Invalid or missing self-healing key", "args": null, "levelname": "WARNING", "levelno": 30, "pathname": "/home/runner/work/The-lab-verse-monitoring-/The-lab-verse-monitoring-/tests/../app/main.py", "filename": "main.py", "module": "main", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 181, "funcName": "verify_self_healing_key", "created": 1769907180.4155595, "msecs": 415.0, "relativeCreated": 1100.2609729766846, "thread": 140668572371840, "threadName": "MainThread", "processName": "MainProcess", "process": 46287}]}, "teardown": {"duration": 0.00022419800006900914, "outcome": "passed"}}, {"nodeid": "tests/test_security.py::TestAuthenticationSecurity::test_valid_auth_key_accepted", "lineno": 368, "outcome": "passed", "keywords": ["test_valid_auth_key_accepted", "asyncio", "pytestmark", "TestAuthenticationSecurity", "test_security.py", "tests", "The-lab-verse-monitoring-", ""], "setup": {"duration": 0.0003149079998365778, "outcome": "passed"}, "call": {"duration": 0.0007708789999014698, "outcome": "passed"}, "teardown": {"duration": 0.00022212399971976993, "outcome": "passed"}}, {"nodeid": "tests/test_security.py::TestSecurityIntegration::test_end_to_end_webhook_security", "lineno": 381, "outcome": "passed", "keywords": ["test_end_to_end_webhook_security", "asyncio", "pytestmark", "TestSecurityIntegration", "test_security.py", "tests", "The-lab-verse-monitoring-", ""], "setup": {"duration": 0.00032961500028250157, "outcome": "passed"}, "call": {"duration": 0.0016876500003490946, "outcome": "passed", "log": [{"name": "vaal_ai_empire.api.sanitizers", "msg": "Dangerous patterns detected: ['(?i)(ignore|forget|disregard)\\\\s+(?:.*?\\\\s+)?(instructions|prompts|rules|everything|above)']", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/runner/work/The-lab-verse-monitoring-/The-lab-verse-monitoring-/tests/../vaal_ai_empire/api/sanitizers.py", "filename": "sanitizers.py", "module": "sanitizers", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 73, "funcName": "sanitize_prompt", "created": 1769907180.420346, "msecs": 420.0, "relativeCreated": 1105.0474643707275, "thread": 140668572371840, "threadName": "MainThread", "processName": "MainProcess", "process": 46287}]}, "teardown": {"duration": 0.00035128599984091124, "outcome": "passed"}}]}