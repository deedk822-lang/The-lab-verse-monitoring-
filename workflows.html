<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Workflow Builder - Jira Setup Guide</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        .hero-bg { background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%); }
        .workflow-canvas { min-height: 400px; background: #f8fafc; border: 2px dashed #cbd5e1; }
        .status-node { 
            background: white; 
            border: 2px solid #e2e8f0; 
            border-radius: 12px; 
            padding: 16px; 
            min-width: 120px; 
            text-align: center;
            cursor: move;
            transition: all 0.2s ease;
        }
        .status-node:hover { 
            border-color: #008DA8; 
            box-shadow: 0 4px 12px rgba(0, 141, 168, 0.15);
        }
        .status-node.selected { 
            border-color: #008DA8; 
            background: #f0f9ff;
        }
        .transition-line { 
            stroke: #64748b; 
            stroke-width: 2; 
            fill: none;
            marker-end: url(#arrowhead);
        }
        .template-card { transition: all 0.3s ease; border: 2px solid transparent; }
        .template-card:hover { border-color: #008DA8; transform: translateY(-2px); }
        .template-card.selected { border-color: #008DA8; background-color: #f0f9ff; }
        .dragging { opacity: 0.7; transform: rotate(5deg); }
        .drop-zone { border: 2px dashed #008DA8; background: #f0f9ff; }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Navigation -->
    <nav class="bg-white shadow-sm fixed w-full top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center">
                    <div class="flex-shrink-0">
                        <h1 class="text-xl font-bold text-gray-900">Jira Setup Guide</h1>
                    </div>
                </div>
                <div class="hidden md:block">
                    <div class="ml-10 flex items-baseline space-x-4">
                        <a href="index.html" class="text-gray-500 hover:text-teal-600 px-3 py-2 rounded-md text-sm font-medium">Home</a>
                        <a href="templates.html" class="text-gray-500 hover:text-teal-600 px-3 py-2 rounded-md text-sm font-medium">Templates</a>
                        <a href="#" class="text-gray-900 hover:text-teal-600 px-3 py-2 rounded-md text-sm font-medium">Workflows</a>
                        <a href="checklist.html" class="text-gray-500 hover:text-teal-600 px-3 py-2 rounded-md text-sm font-medium">Checklist</a>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="hero-bg pt-24 pb-16">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center">
                <h1 class="text-4xl lg:text-5xl font-bold text-gray-900 mb-6">
                    Workflow
                    <span class="text-teal-600">Builder</span>
                </h1>
                <p class="text-xl text-gray-600 max-w-3xl mx-auto mb-8">
                    Design custom workflows with our visual builder. Create status transitions, set up automation rules, and implement best practices for your team's processes.
                </p>
                <div class="flex justify-center items-center space-x-8 text-sm text-gray-500">
                    <div class="flex items-center">
                        <svg class="w-5 h-5 text-green-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                        </svg>
                        Visual Designer
                    </div>
                    <div class="flex items-center">
                        <svg class="w-5 h-5 text-green-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4"></path>
                        </svg>
                        Automation Rules
                    </div>
                    <div class="flex items-center">
                        <svg class="w-5 h-5 text-green-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                        </svg>
                        Best Practices
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Workflow Builder Interface -->
    <section class="py-12">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid grid-cols-1 lg:grid-cols-4 gap-8">
                <!-- Sidebar -->
                <div class="lg:col-span-1">
                    <div class="bg-white rounded-xl shadow-lg p-6 sticky top-24">
                        <h3 class="text-lg font-semibold text-gray-900 mb-6">Workflow Elements</h3>
                        
                        <!-- Status Nodes -->
                        <div class="mb-6">
                            <h4 class="text-sm font-medium text-gray-700 mb-3">Status Types</h4>
                            <div class="space-y-2">
                                <div class="status-node bg-blue-50 border-blue-200" draggable="true" data-status-type="todo">
                                    <div class="w-3 h-3 bg-blue-500 rounded-full mx-auto mb-2"></div>
                                    <div class="text-sm font-medium">To Do</div>
                                </div>
                                <div class="status-node bg-yellow-50 border-yellow-200" draggable="true" data-status-type="progress">
                                    <div class="w-3 h-3 bg-yellow-500 rounded-full mx-auto mb-2"></div>
                                    <div class="text-sm font-medium">In Progress</div>
                                </div>
                                <div class="status-node bg-green-50 border-green-200" draggable="true" data-status-type="done">
                                    <div class="w-3 h-3 bg-green-500 rounded-full mx-auto mb-2"></div>
                                    <div class="text-sm font-medium">Done</div>
                                </div>
                                <div class="status-node bg-red-50 border-red-200" draggable="true" data-status-type="blocked">
                                    <div class="w-3 h-3 bg-red-500 rounded-full mx-auto mb-2"></div>
                                    <div class="text-sm font-medium">Blocked</div>
                                </div>
                            </div>
                        </div>

                        <!-- Templates -->
                        <div class="mb-6">
                            <h4 class="text-sm font-medium text-gray-700 mb-3">Quick Templates</h4>
                            <div class="space-y-2">
                                <button onclick="loadTemplate('simple')" class="template-card w-full p-3 text-left bg-gray-50 rounded-lg hover:bg-gray-100">
                                    <div class="text-sm font-medium text-gray-900">Simple Workflow</div>
                                    <div class="text-xs text-gray-500">To Do → In Progress → Done</div>
                                </button>
                                <button onclick="loadTemplate('review')" class="template-card w-full p-3 text-left bg-gray-50 rounded-lg hover:bg-gray-100">
                                    <div class="text-sm font-medium text-gray-900">Review Process</div>
                                    <div class="text-xs text-gray-500">Includes review and approval steps</div>
                                </button>
                                <button onclick="loadTemplate('deployment')" class="template-card w-full p-3 text-left bg-gray-50 rounded-lg hover:bg-gray-100">
                                    <div class="text-sm font-medium text-gray-900">Deployment Flow</div>
                                    <div class="text-xs text-gray-500">Dev → Test → Staging → Prod</div>
                                </button>
                            </div>
                        </div>

                        <!-- Actions -->
                        <div class="space-y-3">
                            <button onclick="validateWorkflow()" class="w-full px-4 py-2 bg-teal-600 text-white rounded-lg hover:bg-teal-700 transition-colors text-sm font-medium">
                                Validate Workflow
                            </button>
                            <button onclick="exportWorkflow()" class="w-full px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors text-sm font-medium">
                                Export Configuration
                            </button>
                            <button onclick="clearCanvas()" class="w-full px-4 py-2 border border-red-300 text-red-700 rounded-lg hover:bg-red-50 transition-colors text-sm font-medium">
                                Clear Canvas
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Canvas -->
                <div class="lg:col-span-3">
                    <div class="bg-white rounded-xl shadow-lg p-6">
                        <div class="flex justify-between items-center mb-6">
                            <h3 class="text-lg font-semibold text-gray-900">Workflow Canvas</h3>
                            <div class="flex items-center space-x-4 text-sm text-gray-500">
                                <span>Drag status nodes to canvas</span>
                                <span>•</span>
                                <span>Connect with transitions</span>
                            </div>
                        </div>
                        
                        <div id="workflowCanvas" class="workflow-canvas rounded-lg relative">
                            <svg id="workflowSvg" class="absolute inset-0 w-full h-full pointer-events-none">
                                <defs>
                                    <marker id="arrowhead" markerWidth="10" markerHeight="7" 
                                            refX="9" refY="3.5" orient="auto">
                                        <polygon points="0 0, 10 3.5, 0 7" fill="#64748b" />
                                    </marker>
                                </defs>
                            </svg>
                            
                            <div id="canvasContent" class="relative p-8 min-h-[400px]">
                                <div class="text-center text-gray-400 mt-20">
                                    <svg class="w-16 h-16 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4"></path>
                                    </svg>
                                    <p class="text-lg">Drag status nodes here to build your workflow</p>
                                    <p class="text-sm mt-2">Or use a quick template to get started</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Workflow Properties -->
                    <div class="mt-8 bg-white rounded-xl shadow-lg p-6">
                        <h3 class="text-lg font-semibold text-gray-900 mb-6">Workflow Properties</h3>
                        <div id="workflowProperties" class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Workflow Name</label>
                                <input type="text" id="workflowName" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent" placeholder="My Custom Workflow">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Description</label>
                                <input type="text" id="workflowDescription" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent" placeholder="Brief description of this workflow">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Applicable Issue Types</label>
                                <select id="issueTypes" multiple class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent h-24">
                                    <option value="story">Story</option>
                                    <option value="bug">Bug</option>
                                    <option value="task">Task</option>
                                    <option value="epic">Epic</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Default Assignee</label>
                                <select id="defaultAssignee" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent">
                                    <option value="">None</option>
                                    <option value="project-lead">Project Lead</option>
                                    <option value="component-lead">Component Lead</option>
                                    <option value="unassigned">Unassigned</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Best Practices Section -->
    <section class="py-12 bg-white">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-12">
                <h2 class="text-3xl font-bold text-gray-900 mb-4">Workflow Best Practices</h2>
                <p class="text-xl text-gray-600 max-w-3xl mx-auto">Industry-proven methodologies for creating effective workflows</p>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                <div class="bg-gray-50 rounded-xl p-6">
                    <div class="w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center mb-4">
                        <svg class="w-6 h-6 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                        </svg>
                    </div>
                    <h3 class="text-lg font-semibold text-gray-900 mb-3">Keep It Simple</h3>
                    <p class="text-gray-600">Start with 3-5 statuses maximum. Complex workflows create confusion and slow down teams. Add complexity only when needed.</p>
                </div>
                
                <div class="bg-gray-50 rounded-xl p-6">
                    <div class="w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center mb-4">
                        <svg class="w-6 h-6 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                        </svg>
                    </div>
                    <h3 class="text-lg font-semibold text-gray-900 mb-3">Clear Status Names</h3>
                    <p class="text-gray-600">Use action-oriented status names that clearly indicate the next step. Avoid ambiguous terms like "In Process" or "Pending".</p>
                </div>
                
                <div class="bg-gray-50 rounded-xl p-6">
                    <div class="w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center mb-4">
                        <svg class="w-6 h-6 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4"></path>
                        </svg>
                    </div>
                    <h3 class="text-lg font-semibold text-gray-900 mb-3">Automate Transitions</h3>
                    <p class="text-gray-600">Use automation to handle routine transitions and notifications. This reduces manual work and ensures consistency.</p>
                </div>
                
                <div class="bg-gray-50 rounded-xl p-6">
                    <div class="w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center mb-4">
                        <svg class="w-6 h-6 text-orange-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z'></path>
                        </svg>
                    </div>
                    <h3 class="text-lg font-semibold text-gray-900 mb-3">Define Exit Criteria</h3>
                    <p class="text-gray-600">Each status should have clear criteria for when work can move to the next stage. This prevents quality issues and rework.</p>
                </div>
                
                <div class="bg-gray-50 rounded-xl p-6">
                    <div class="w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center mb-4">
                        <svg class="w-6 h-6 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"></path>
                        </svg>
                    </div>
                    <h3 class="text-lg font-semibold text-gray-900 mb-3">Handle Edge Cases</h3>
                    <p class="text-gray-600">Plan for exceptions and edge cases. Include statuses for blocked, reopened, or cancelled work items.</p>
                </div>
                
                <div class="bg-gray-50 rounded-xl p-6">
                    <div class="w-12 h-12 bg-teal-100 rounded-lg flex items-center justify-center mb-4">
                        <svg class="w-6 h-6 text-teal-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z'></path>
                        </svg>
                    </div>
                    <h3 class="text-lg font-semibold text-gray-900 mb-3">Measure and Iterate</h3>
                    <p class="text-gray-600">Track workflow metrics and gather team feedback. Continuously improve based on data and user experience.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-gray-900 text-white py-12">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center">
                <h3 class="text-2xl font-bold mb-4">Jira Setup Guide</h3>
                <p class="text-gray-400 mb-8">Your comprehensive resource for Jira configuration and best practices</p>
                <div class="border-t border-gray-800 pt-8">
                    <p class="text-gray-500">&copy; 2025 Jira Setup Guide. Built with modern web technologies for optimal performance.</p>
                </div>
            </div>
        </div>
    </footer>

    <script>
        // Workflow builder state
        let workflowNodes = [];
        let workflowConnections = [];
        let selectedNode = null;
        let draggedNode = null;
        let nodeCounter = 0;

        // Initialize drag and drop
        document.addEventListener('DOMContentLoaded', function() {
            initializeDragAndDrop();
            initializeCanvas();
        });

        function initializeDragAndDrop() {
            const statusNodes = document.querySelectorAll('.status-node[draggable="true"]');
            
            statusNodes.forEach(node => {
                node.addEventListener('dragstart', handleDragStart);
                node.addEventListener('dragend', handleDragEnd);
            });
        }

        function initializeCanvas() {
            const canvas = document.getElementById('workflowCanvas');
            canvas.addEventListener('dragover', handleDragOver);
            canvas.addEventListener('drop', handleDrop);
            canvas.addEventListener('click', handleCanvasClick);
        }

        function handleDragStart(e) {
            draggedNode = {
                type: e.target.dataset.statusType,
                element: e.target.cloneNode(true)
            };
            e.target.classList.add('dragging');
        }

        function handleDragEnd(e) {
            e.target.classList.remove('dragging');
        }

        function handleDragOver(e) {
            e.preventDefault();
            e.currentTarget.classList.add('drop-zone');
        }

        function handleDrop(e) {
            e.preventDefault();
            e.currentTarget.classList.remove('drop-zone');
            
            if (draggedNode) {
                const rect = e.currentTarget.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;
                
                createNodeOnCanvas(x, y, draggedNode.type);
                draggedNode = null;
            }
        }

        function handleCanvasClick(e) {
            if (e.target === e.currentTarget) {
                deselectAllNodes();
            }
        }

        function createNodeOnCanvas(x, y, type) {
            const nodeId = `node-${nodeCounter++}`;
            const colors = {
                todo: { bg: 'bg-blue-50', border: 'border-blue-200', dot: 'bg-blue-500' },
                progress: { bg: 'bg-yellow-50', border: 'border-yellow-200', dot: 'bg-yellow-500' },
                done: { bg: 'bg-green-50', border: 'border-green-200', dot: 'bg-green-500' },
                blocked: { bg: 'bg-red-50', border: 'border-red-200', dot: 'bg-red-500' }
            };
            
            const color = colors[type] || colors.todo;
            const labels = {
                todo: 'To Do',
                progress: 'In Progress',
                done: 'Done',
                blocked: 'Blocked'
            };

            const node = document.createElement('div');
            node.className = `status-node ${color.bg} ${color.border} absolute cursor-pointer`;
            node.id = nodeId;
            node.style.left = `${x - 60}px`;
            node.style.top = `${y - 40}px`;
            node.innerHTML = `
                <div class="w-3 h-3 ${color.dot} rounded-full mx-auto mb-2"></div>
                <div class="text-sm font-medium">${labels[type]}</div>
            `;

            node.addEventListener('click', () => selectNode(nodeId));
            node.addEventListener('dblclick', () => editNode(nodeId));

            document.getElementById('canvasContent').appendChild(node);
            
            // Remove placeholder text if this is the first node
            const placeholder = document.querySelector('#canvasContent .text-center');
            if (placeholder) {
                placeholder.remove();
            }

            workflowNodes.push({
                id: nodeId,
                type: type,
                x: x,
                y: y,
                label: labels[type]
            });

            // Animate node appearance
            anime({
                targets: node,
                scale: [0, 1],
                opacity: [0, 1],
                duration: 300,
                easing: 'easeOutBack'
            });
        }

        function selectNode(nodeId) {
            deselectAllNodes();
            const node = document.getElementById(nodeId);
            node.classList.add('selected');
            selectedNode = nodeId;
        }

        function deselectAllNodes() {
            document.querySelectorAll('.status-node').forEach(node => {
                node.classList.remove('selected');
            });
            selectedNode = null;
        }

        function editNode(nodeId) {
            const node = workflowNodes.find(n => n.id === nodeId);
            if (node) {
                const newLabel = prompt('Enter new status name:', node.label);
                if (newLabel && newLabel.trim()) {
                    node.label = newLabel.trim();
                    const element = document.getElementById(nodeId);
                    element.querySelector('.text-sm').textContent = newLabel.trim();
                }
            }
        }

        function loadTemplate(templateType) {
            clearCanvas();
            
            const templates = {
                simple: [
                    { type: 'todo', x: 100, y: 200 },
                    { type: 'progress', x: 300, y: 200 },
                    { type: 'done', x: 500, y: 200 }
                ],
                review: [
                    { type: 'todo', x: 100, y: 150 },
                    { type: 'progress', x: 300, y: 150 },
                    { type: 'todo', x: 300, y: 250, label: 'In Review' },
                    { type: 'done', x: 500, y: 200 }
                ],
                deployment: [
                    { type: 'todo', x: 100, y: 100, label: 'Development' },
                    { type: 'todo', x: 250, y: 100, label: 'Testing' },
                    { type: 'todo', x: 400, y: 100, label: 'Staging' },
                    { type: 'done', x: 550, y: 100, label: 'Production' }
                ]
            };

            const template = templates[templateType];
            if (template) {
                template.forEach(node => {
                    createNodeOnCanvas(node.x, node.y, node.type);
                    if (node.label) {
                        const lastNode = workflowNodes[workflowNodes.length - 1];
                        lastNode.label = node.label;
                        const element = document.getElementById(lastNode.id);
                        element.querySelector('.text-sm').textContent = node.label;
                    }
                });
                
                showNotification(`${templateType.charAt(0).toUpperCase() + templateType.slice(1)} workflow template loaded!`, 'success');
            }
        }

        function validateWorkflow() {
            if (workflowNodes.length < 2) {
                showNotification('Workflow must have at least 2 status nodes', 'warning');
                return;
            }

            // Check for start and end nodes
            const hasStart = workflowNodes.some(n => n.type === 'todo');
            const hasEnd = workflowNodes.some(n => n.type === 'done');

            if (!hasStart) {
                showNotification('Workflow should have a "To Do" or start status', 'warning');
                return;
            }

            if (!hasEnd) {
                showNotification('Workflow should have a "Done" or end status', 'warning');
                return;
            }

            showNotification('Workflow validation passed! ✓', 'success');
        }

        function exportWorkflow() {
            if (workflowNodes.length === 0) {
                showNotification('No workflow to export', 'warning');
                return;
            }

            const workflowConfig = {
                name: document.getElementById('workflowName').value || 'My Custom Workflow',
                description: document.getElementById('workflowDescription').value || '',
                nodes: workflowNodes,
                connections: workflowConnections,
                properties: {
                    issueTypes: Array.from(document.getElementById('issueTypes').selectedOptions).map(o => o.value),
                    defaultAssignee: document.getElementById('defaultAssignee').value
                },
                exportedAt: new Date().toISOString()
            };

            const dataStr = JSON.stringify(workflowConfig, null, 2);
            const dataBlob = new Blob([dataStr], { type: 'application/json' });
            const url = URL.createObjectURL(dataBlob);
            
            const link = document.createElement('a');
            link.href = url;
            link.download = `${workflowConfig.name.replace(/\s+/g, '_')}_workflow.json`;
            link.click();
            
            URL.revokeObjectURL(url);
            showNotification('Workflow configuration exported successfully!', 'success');
        }

        function clearCanvas() {
            if (workflowNodes.length === 0) return;
            
            if (confirm('Are you sure you want to clear the canvas? This action cannot be undone.')) {
                document.getElementById('canvasContent').innerHTML = `
                    <div class="text-center text-gray-400 mt-20">
                        <svg class="w-16 h-16 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4"></path>
                        </svg>
                        <p class="text-lg">Drag status nodes here to build your workflow</p>
                        <p class="text-sm mt-2">Or use a quick template to get started</p>
                    </div>
                `;
                workflowNodes = [];
                workflowConnections = [];
                selectedNode = null;
                showNotification('Canvas cleared', 'info');
            }
        }

        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `fixed top-20 right-4 z-50 p-4 rounded-lg shadow-lg max-w-sm ${
                type === 'success' ? 'bg-green-500 text-white' :
                type === 'warning' ? 'bg-yellow-500 text-white' :
                type === 'error' ? 'bg-red-500 text-white' :
                'bg-blue-500 text-white'
            }`;
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            anime({
                targets: notification,
                translateX: [300, 0],
                opacity: [0, 1],
                duration: 300,
                easing: 'easeOutQuad'
            });
            
            setTimeout(() => {
                anime({
                    targets: notification,
                    translateX: [0, 300],
                    opacity: [1, 0],
                    duration: 300,
                    easing: 'easeInQuad',
                    complete: () => notification.remove()
                });
            }, 4000);
        }

        // Keyboard shortcuts
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Delete' && selectedNode) {
                // Remove selected node
                const node = document.getElementById(selectedNode);
                if (node) {
                    node.remove();
                    workflowNodes = workflowNodes.filter(n => n.id !== selectedNode);
                    selectedNode = null;
                    showNotification('Node removed', 'info');
                }
            }
            
            if (e.ctrlKey && e.key === 'z') {
                e.preventDefault();
                // Undo functionality would go here
                showNotification('Undo not implemented yet', 'info');
            }
            
            if (e.ctrlKey && e.key === 's') {
                e.preventDefault();
                exportWorkflow();
            }
        });
    </script>
</body>
</html>